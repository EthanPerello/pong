<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>Pong</title>
    <link rel="stylesheet" type="text/css" href="theme/love.css">
  </head>
  <body>
    <center>
      <div>
        <h1>Pong</h1>
        <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
        <canvas id="loadingCanvas" width="800" height="600"></canvas>
      </div>
    </center>

    <script type='text/javascript'>
      var game = "pong.love"; // ✅ THIS is what was missing!

      var loadingContext = document.getElementById('loadingCanvas').getContext('2d');
      function drawLoadingText(text) {
        var canvas = loadingContext.canvas;
        loadingContext.fillStyle = "rgb(142, 195, 227)";
        loadingContext.fillRect(0, 0, canvas.scrollWidth, canvas.scrollHeight);
        loadingContext.font = '2em arial';
        loadingContext.textAlign = 'center';
        loadingContext.fillStyle = "rgb( 11, 86, 117 )";
        loadingContext.fillText(text, canvas.scrollWidth / 2, canvas.scrollHeight / 2);
        loadingContext.fillText("Powered By Emscripten.", canvas.scrollWidth / 2, canvas.scrollHeight / 4);
        loadingContext.fillText("Powered By LÖVE.", canvas.scrollWidth / 2, canvas.scrollHeight / 4 * 3);
      }

      var Module = {
        arguments: [game],
        canvas: (function() {
          var canvas = document.getElementById('canvas');
          canvas.addEventListener("webglcontextlost", function(e) {
            alert('WebGL context lost. Please reload the page.');
            e.preventDefault();
          }, false);
          return canvas;
        })(),
        setStatus: function(text) {
          if (text) {
            drawLoadingText(text);
          } else {
            document.getElementById('loadingCanvas').style.display = 'none';
            document.getElementById('canvas').style.display = 'block';
          }
        },
        monitorRunDependencies: function(left) {
          Module.setStatus(left ? "Loading... (" + left + ")" : "Starting game...");
        }
      };

      Module.setStatus("Initializing...");
    </script>
    <script async type="text/javascript" src="love.js"></script>
    <footer>
      <p>Built with <a href="https://github.com/TannerRogalsky/love.js">love.js</a></p>
    </footer>
  </body>
</html>
